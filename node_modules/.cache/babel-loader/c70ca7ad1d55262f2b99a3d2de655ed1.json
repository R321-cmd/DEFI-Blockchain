{"ast":null,"code":"\"use strict\";\n\nimport _classCallCheck from \"C:/Users/LENOVO.USER/Downloads/Nuevo_defi/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/LENOVO.USER/Downloads/Nuevo_defi/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/LENOVO.USER/Downloads/Nuevo_defi/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/LENOVO.USER/Downloads/Nuevo_defi/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { BigNumber } from \"@ethersproject/bignumber\";\nimport { MaxUint256, NegativeOne, One, Zero } from \"@ethersproject/constants\";\nimport { Coder } from \"./abstract-coder\";\nexport var NumberCoder = /*#__PURE__*/function (_Coder) {\n  _inherits(NumberCoder, _Coder);\n  var _super = _createSuper(NumberCoder);\n  function NumberCoder(size, signed, localName) {\n    var _this;\n    _classCallCheck(this, NumberCoder);\n    var name = (signed ? \"int\" : \"uint\") + size * 8;\n    _this = _super.call(this, name, name, localName, false);\n    _this.size = size;\n    _this.signed = signed;\n    return _this;\n  }\n  _createClass(NumberCoder, [{\n    key: \"encode\",\n    value: function encode(writer, value) {\n      var v = BigNumber.from(value);\n      // Check bounds are safe for encoding\n      var maxUintValue = MaxUint256.mask(writer.wordSize * 8);\n      if (this.signed) {\n        var bounds = maxUintValue.mask(this.size * 8 - 1);\n        if (v.gt(bounds) || v.lt(bounds.add(One).mul(NegativeOne))) {\n          this._throwError(\"value out-of-bounds\", value);\n        }\n      } else if (v.lt(Zero) || v.gt(maxUintValue.mask(this.size * 8))) {\n        this._throwError(\"value out-of-bounds\", value);\n      }\n      v = v.toTwos(this.size * 8).mask(this.size * 8);\n      if (this.signed) {\n        v = v.fromTwos(this.size * 8).toTwos(8 * writer.wordSize);\n      }\n      return writer.writeValue(v);\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(reader) {\n      var value = reader.readValue().mask(this.size * 8);\n      if (this.signed) {\n        value = value.fromTwos(this.size * 8);\n      }\n      return reader.coerce(this.name, value);\n    }\n  }]);\n  return NumberCoder;\n}(Coder);","map":{"version":3,"names":["_classCallCheck","_createClass","_inherits","_createSuper","BigNumber","MaxUint256","NegativeOne","One","Zero","Coder","NumberCoder","_Coder","_super","size","signed","localName","_this","name","call","key","value","encode","writer","v","from","maxUintValue","mask","wordSize","bounds","gt","lt","add","mul","_throwError","toTwos","fromTwos","writeValue","decode","reader","readValue","coerce"],"sources":["../../src.ts/coders/number.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}